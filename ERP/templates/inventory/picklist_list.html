{% extends "inventory/_list_base.html" %}
{% load static %}

{% block title %}Pick Lists{% endblock %}
{% block list_page_title %}Pick Lists{% endblock %}
{% block list_title %}Warehouse Pick Lists{% endblock %}

{% block list_actions %}
  <div class="d-flex flex-wrap gap-2">
    {% if can_add and create_url %}
      <a href="{{ create_url }}" class="btn btn-success btn-sm">
        <i class="mdi mdi-plus"></i> Create Pick List
      </a>
    {% endif %}
  </div>
{% endblock %}
  {% block custom_filters %}
  <form method="get" class="d-flex gap-2 align-items-center mb-3">
      <label class="mb-0">Category:</label>
      <select name="category" class="form-select w-auto">
          <option value="">All</option>
          {% for cat in categories %}
              <option value="{{ cat.id }}" {% if selected_category|stringformat:"s" == cat.id|stringformat:"s" %}selected{% endif %}>{{ cat.name }}</option>
          {% endfor %}
      </select>
      <button class="btn btn-outline-secondary btn-sm">Filter</button>
  </form>
  {% endblock %}

{% block table_head %}
  <tr>
    <th>Number</th>
    <th>Shipment</th>
    <th>Warehouse</th>
    <th>Items</th>
    <th>Status</th>
    <th>Created</th>
    <th style="width:150px;">Actions</th>
  </tr>
{% endblock %}

{% block table_body %}
  {% for picklist in object_list %}
    <tr>
      <td class="fw-semibold">{{ picklist.number }}</td>
      <td>{{ picklist.shipment.shipment_number }}</td>
      <td>{{ picklist.warehouse.code }}</td>
      <td>
        <span class="badge bg-info">
          {{ picklist.items.count }} items
        </span>
      </td>
      <td>
        {% if picklist.status == 'draft' %}
          <span class="badge bg-secondary">Draft</span>
        {% elif picklist.status == 'ready' %}
          <span class="badge bg-primary">Ready</span>
        {% elif picklist.status == 'picked' %}
          <span class="badge bg-success">Picked</span>
        {% else %}
          <span class="badge bg-light text-dark">{{ picklist.get_status_display }}</span>
        {% endif %}
      </td>
      <td>{{ picklist.created_at|date:"SHORT_DATE_FORMAT" }}</td>
      <td>
        <div class="btn-group btn-group-sm" role="group">
          <a href="{% url 'inventory:picklist_detail' picklist.pk %}" class="btn btn-outline-info">View</a>
          {% if can_change %}<a href="{% url 'inventory:picklist_update' picklist.pk %}" class="btn btn-outline-primary">Edit</a>{% endif %}
          {% if can_delete %}<a href="{% url 'inventory:picklist_delete' picklist.pk %}" class="btn btn-outline-danger">Delete</a>{% endif %}
        </div>
      </td>
    </tr>
  {% empty %}
    <tr><td colspan="6" class="text-center text-muted py-3">No pick lists found.</td></tr>
  {% endfor %}
{% endblock %}
