{% extends "inventory/_list_base.html" %}
{% load static mptt_tags inventory_table_tags %}

{% block title %}Product Categories{% endblock %}
{% block list_page_title %}Product Categories{% endblock %}
{% block list_title %}Product Categories{% endblock %}

{% block list_actions %}
  <div class="btn-group btn-group-sm" role="group" aria-label="Category actions">
    {% if can_add and create_url %}
    <a href="{{ create_url }}" class="btn btn-success btn-sm">
      <i class="mdi mdi-plus-circle"></i> Add Category
    </a>
    {% endif %}
  </div>
{% endblock %}

{% block table_head %}
  <tr>
    <th style="width: 35%;">Name</th>
    <th style="width: 20%;">Code</th>
    <th style="width: 20%;">Parent Category</th>
    <th style="width: 10%;">Status</th>
    <th style="width: 15%;">Actions</th>
  </tr>
{% endblock %}

{% block table_body %}
  {% recursetree categories %}
    <tr>
      <td class="align-middle">
        <span style="padding-left: {{ node.get_ancestors|length|times:20 }}px;">
          {% if node.get_children %}
            <i class="mdi mdi-folder"></i>
          {% else %}
            <i class="mdi mdi-folder-outline"></i>
          {% endif %}
        </span>
        {{ node.name }}
      </td>
      <td><code>{{ node.code }}</code></td>
      <td>
        {% if node.parent %}
          <a href="{% url 'inventory:product_category_detail' node.parent.pk %}">{{ node.parent.name }}</a>
        {% else %}
          <span class="text-muted">â€”</span>
        {% endif %}
      </td>
      <td>
        {% if node.is_active %}
          <span class="badge bg-success-subtle text-success">
            <i class="mdi mdi-check-circle"></i> Active
          </span>
        {% else %}
          <span class="badge bg-secondary-subtle text-secondary">
            <i class="mdi mdi-minus-circle"></i> Inactive
          </span>
        {% endif %}
      </td>
      <td>
        <div class="btn-group btn-group-sm" role="group" aria-label="Category actions">
          <a href="{% url 'inventory:product_category_detail' node.pk %}" 
             class="btn btn-outline-info" 
             title="View Details"
             data-bs-toggle="tooltip">
            <i class="mdi mdi-eye"></i>
          </a>
          <a href="{% url 'inventory:product_category_update' node.pk %}" 
             class="btn btn-outline-primary" 
             title="Edit"
             data-bs-toggle="tooltip">
            <i class="mdi mdi-pencil"></i>
          </a>
          <a href="{% url 'inventory:product_category_delete' node.pk %}" 
             class="btn btn-outline-danger" 
             title="Delete"
             data-bs-toggle="tooltip">
            <i class="mdi mdi-trash-can"></i>
          </a>
        </div>
      </td>
    </tr>
  {% endrecursetree %}
  
  {% if not categories %}
    <tr>
      <td colspan="5" class="text-center py-5">
        <div class="text-muted">
          <i class="mdi mdi-folder-open-outline" style="font-size: 3rem;"></i>
          <p class="mt-3 mb-0">No product categories found</p>
          <small>Create your first category to get started</small>
        </div>
      </td>
    </tr>
  {% endif %}
{% endblock %}

<style>
  .btn-group-sm .btn {
    padding: 0.375rem 0.75rem;
    font-size: 0.875rem;
  }
  
  .badge {
    font-size: 0.8rem;
    padding: 0.4rem 0.8rem;
  }
</style>
