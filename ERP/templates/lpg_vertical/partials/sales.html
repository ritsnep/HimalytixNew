{% if messages %}
  <div class="mb-2">
    {% for message in messages %}
      <div class="alert alert-{{ message.tags }} mb-1">{{ message }}</div>
    {% endfor %}
  </div>
{% endif %}
<div class="row">
  <div class="col-lg-5">
    <div class="card">
      <div class="card-header"><h5 class="mb-0">Create Sales Invoice (header)</h5></div>
      <div class="card-body">
        <form hx-post="{% url 'lpg_vertical:spa_sales' %}" hx-target="#lpg-spa-body" hx-swap="innerHTML transition:true" class="row g-2">
          <input type="hidden" name="form_name" value="sales">
          {% csrf_token %}
          {{ form.non_field_errors }}
          <div class="col-md-6">{{ form.invoice_no.label_tag }} {{ form.invoice_no }}</div>
          <div class="col-md-6">{{ form.date.label_tag }} {{ form.date }}</div>
          <div class="col-md-6">{{ form.dealer.label_tag }} {{ form.dealer }}</div>
          <div class="col-md-6">{{ form.payment_type.label_tag }} {{ form.payment_type }}</div>
          <div class="col-md-6">{{ form.empty_cylinders_collected.label_tag }} {{ form.empty_cylinders_collected }}</div>
          <div class="col-12">{{ form.notes.label_tag }} {{ form.notes }}</div>
          <div class="col-12">
            <button type="submit" class="btn btn-primary">Save Invoice</button>
            <p class="text-muted small mb-0 mt-2">Add lines &amp; post via API (/sales-invoices/{id}/post_invoice/).</p>
          </div>
        </form>
      </div>
    </div>
  </div>
  <div class="col-lg-7">
    <div class="card">
      <div class="card-header d-flex justify-content-between align-items-center">
        <h5 class="mb-0">Recent Sales Invoices</h5>
      </div>
      <div class="card-body">
        <table class="table table-sm">
          <thead>
            <tr><th>Date</th><th>No.</th><th>Dealer</th><th>Total</th><th>Status</th></tr>
          </thead>
          <tbody>
            {% for inv in invoices %}
              <tr>
                <td>{{ inv.date }}</td>
                <td>{{ inv.invoice_no }}</td>
                <td>{{ inv.dealer }}</td>
                <td>{{ inv.total_amount }}</td>
                <td>{{ inv.get_status_display }}</td>
              </tr>
            {% empty %}
              <tr><td colspan="5" class="text-muted">No invoices yet.</td></tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
