<div class="invoice-line-row">
    <input type="hidden" name="line_index[]" value="{{ line_index }}">
    
    <div class="row">
        <!-- Description / Product -->
        <div class="col-md-4">
            <div class="form-group">
                <label class="small">Description *</label>
                <input type="text" 
                       class="form-control form-control-sm" 
                       name="description_{{ line_index }}"
                       placeholder="Item description"
                       required>
                <input type="hidden" name="product_id_{{ line_index }}" id="productId_{{ line_index }}">
            </div>
        </div>
        
        <!-- Quantity -->
        <div class="col-md-2">
            <div class="form-group">
                <label class="small">Quantity *</label>
                <input type="number" 
                       class="form-control form-control-sm" 
                       name="quantity_{{ line_index }}"
                       step="0.01"
                       min="0"
                       value="1"
                       required>
            </div>
        </div>
        
        <!-- Unit Price -->
        <div class="col-md-2">
            <div class="form-group">
                <label class="small">Unit Price *</label>
                <input type="number" 
                       class="form-control form-control-sm" 
                       name="unit_price_{{ line_index }}"
                       step="0.01"
                       min="0"
                       value="0"
                       required>
            </div>
        </div>
        
        <!-- Tax Rate -->
        <div class="col-md-2">
            <div class="form-group">
                <label class="small">Tax Rate</label>
                <select class="form-control form-control-sm" 
                        name="tax_rate_{{ line_index }}">
                    <option value="">No Tax</option>
                    {% for tax in tax_rates %}
                    <option value="{{ tax.tax_code_id }}">{{ tax.name }} ({{ tax.rate }}%)</option>
                    {% endfor %}
                </select>
            </div>
        </div>
        
        <!-- Revenue Account -->
        <div class="col-md-2">
            <div class="form-group">
                <label class="small">Account</label>
                <select class="form-control form-control-sm" 
                        name="revenue_account_{{ line_index }}">
                    {% for account in revenue_accounts %}
                    <option value="{{ account.account_id }}">{{ account.account_code }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
    </div>
    
    <div class="row align-items-center">
        <div class="col-md-10">
            <div class="text-end">
                <small class="text-muted">
                    Line Total: <strong id="lineTotal_{{ line_index }}">0.00</strong>
                </small>
            </div>
        </div>
        <div class="col-md-2 text-end">
            <button type="button" 
                    class="btn btn-sm btn-danger"
                    onclick="removeLine(this)">
                <i class="fas fa-trash"></i>
            </button>
        </div>
    </div>
</div>
