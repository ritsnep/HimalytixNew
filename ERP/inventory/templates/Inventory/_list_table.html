{% load inventory_table_tags %}

<div class="table-responsive">
  <table class="table table-bordered table-sm align-middle w-100 mb-0">
    <thead class="table-light">
      <tr>
        {% for header in headers %}
          <th scope="col" class="text-nowrap">{{ header }}</th>
        {% endfor %}
        {% if show_actions %}
          <th scope="col" class="text-nowrap text-end" style="width: 1%;">
            <span class="visually-hidden">Actions</span>
          </th>
        {% endif %}
      </tr>
    </thead>

    <tbody>
      {% for item in items %}
        <tr>
          {% for field in fields %}
            <td class="text-nowrap">
              {{ item|getattribute:field }}
            </td>
          {% endfor %}

          {% if show_actions %}
            <td class="text-end text-nowrap">
              <div class="btn-group btn-group-sm" role="group" aria-label="Row actions">
                {% if update_url_name %}
                  <a class="btn btn-light" href="{% url update_url_name item.pk %}" title="Edit">
                    <i class="mdi mdi-pencil"></i>
                    <span class="d-none d-lg-inline ms-1">Edit</span>
                  </a>
                {% endif %}

                {% if delete_url_name or extra_actions %}
                  <button
                    type="button"
                    class="btn btn-light dropdown-toggle dropdown-toggle-split"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                    title="More"
                  >
                    <span class="visually-hidden">More</span>
                  </button>
                  <ul class="dropdown-menu dropdown-menu-end">
                    {% if delete_url_name %}
                      <li>
                        <a class="dropdown-item text-danger" href="{% url delete_url_name item.pk %}">
                          <i class="mdi mdi-delete-outline me-1"></i> Delete
                        </a>
                      </li>
                    {% endif %}

                    {% if extra_actions %}
                      {% if delete_url_name %}<li><hr class="dropdown-divider"></li>{% endif %}
                      {% for action in extra_actions %}
                        <li>
                          <a class="dropdown-item {{ action.class|default:'' }}"
                             href="{% url action.url_name item.pk %}">
                            {% if action.icon %}<i class="{{ action.icon }} me-1"></i>{% endif %}
                            {{ action.label }}
                          </a>
                        </li>
                      {% endfor %}
                    {% endif %}
                  </ul>
                {% endif %}
              </div>
            </td>
          {% endif %}
        </tr>
      {% empty %}
        <tr>
          <td colspan="{{ headers|length|add:1 }}" class="text-center text-muted py-4">
            No items found.
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
