# Voucher Entry Module Audit

## Logic Checks
- `create_voucher` and `post_journal` validate debit/credit totals and ensure periods are open. No check that header totals match aggregated line amounts before save. Race condition risk mitigated by `transaction.atomic`.
- `JournalLineForm` enforces single-sided lines but `JournalLine` model lacked equivalent validation.
- Disabled fields generated by `build_form` remained required causing validation errors.
- `close_period` function lacked newline at EOF.

## Configurable Settings
- `VoucherModeConfig` provides per-voucher flags: `layout_style`, `show_account_balances`, `show_tax_details`, etc. Defaults shown in model fields.
- `ui_schema` JSON defines dynamic fields; loaded via `voucher_schema.loader.load_schema`.
- Journal numbering controlled by `JournalType.auto_numbering_*` fields.

## Entity Review
- `JournalLine` stores both debit and credit fields; normalization ok but lacked validation.
- `GeneralLedger.project` uses integer rather than FK causing potential integrity gaps.

## Enhancements
1. Model-level validation for `JournalLine` to prevent double entry errors.
2. In `forms_factory._init_field` mark disabled fields as not required to avoid validation issues.
3. Future: convert `GeneralLedger.project` to FK; expose more config flags for UI.