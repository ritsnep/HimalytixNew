{% extends 'accounting/_list_base.html' %}
{% load static %}

{% block title %}Departments{% endblock %}
{% block breadcrumb %}Departments{% endblock %}
{% block add_url %}{% url 'accounting:department_create' %}{% endblock %}

{% block list_header %}
<h4 class="card-title">Departments</h4>
{% endblock %}

{% block create_button %}
<a href="{% url 'accounting:department_create' %}" class="btn btn-success mb-2">
    <i class="mdi mdi-plus me-1"></i> New Department
</a>
{% endblock %}

{% block table_head %}
<thead>
    <tr>
        <th>Code</th>
        <th>Name</th>
        <th>Description</th>
        <th>Status</th>
        <th data-default-visible="false">Start Date</th>
        <th data-default-visible="false">End Date</th>
        <th data-default-visible="false">Archived At</th>
        <th data-default-visible="false">Archived By</th>
        <th data-default-visible="false">Created At</th>
        <th data-default-visible="false">Updated At</th>
        <th data-default-visible="false">Created By</th>
        <th data-default-visible="false">Updated By</th>
        <th class="no-search">Actions</th>
    </tr>
</thead>
{% endblock %}

{% block table_body %}
<tbody>
    {% for d in departments %}
    <tr>
        <td>{{ d.code }}</td>
        <td>{{ d.name }}</td>
        <td>{{ d.description }}</td>
        <td>
            {% if d.is_active %}
                <span class="badge bg-success">Active</span>
            {% else %}
                <span class="badge bg-danger">Inactive</span>
            {% endif %}
        </td>
        <td>{{ d.start_date }}</td>
        <td>{{ d.end_date }}</td>
        <td>{{ d.archived_at }}</td>
        <td>{{ d.archived_by }}</td>
        <td>{{ d.created_at }}</td>
        <td>{{ d.updated_at }}</td>
        <td>{{ d.created_by }}</td>
        <td>{{ d.updated_by }}</td>
        <td>
            <a href="{% url 'accounting:department_update' d.pk %}" class="btn btn-sm btn-primary">
                <i class="fas fa-edit"></i> Edit
            </a>
        </td>
    </tr>
    {% empty %}
    <tr><td colspan="5" class="text-center">No departments found.</td></tr>
    {% endfor %}
</tbody>
{% endblock %}
