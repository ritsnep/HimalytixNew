{% extends 'accounting/_list_base.html' %}

{% block title %}Sales Orders{% endblock %}

{% block table_head %}
<thead>
    <tr>
        <th>#</th>
        <th>Customer</th>
        <th>Order Date</th>
        <th>Expected Ship</th>
        <th>Status</th>
        <th class="text-end">Total</th>
        <th>Actions</th>
    </tr>
</thead>
{% endblock table_head %}

{% block table_body %}
<tbody>
    {% for order in orders %}
    <tr>
        <td>{{ order.order_number }}</td>
        <td>{{ order.customer_display_name }}</td>
        <td>{{ order.order_date }}</td>
        <td>{{ order.expected_ship_date|default:'-' }}</td>
        <td><span class="badge bg-info text-dark text-capitalize">{{ order.status }}</span></td>
        <td class="text-end">{{ order.total }}</td>
        <td>
            <form method="post" action="{% url 'accounting:sales_order_action' order.pk %}" class="d-inline">
                {% csrf_token %}
                <input type="hidden" name="action" value="confirm">
                <button type="submit" class="btn btn-sm btn-outline-primary" {% if order.status != 'draft' %}disabled{% endif %}>Confirm</button>
            </form>
            <form method="post" action="{% url 'accounting:sales_order_action' order.pk %}" class="d-inline ms-1">
                {% csrf_token %}
                <input type="hidden" name="action" value="invoice">
                <button type="submit" class="btn btn-sm btn-outline-success" {% if order.status != 'confirmed' and order.status != 'fulfilled' %}disabled{% endif %}>To Invoice</button>
            </form>
        </td>
    </tr>
    {% empty %}
    <tr>
        <td colspan="7" class="text-center text-muted">No sales orders yet.</td>
    </tr>
    {% endfor %}
</tbody>
{% endblock table_body %}
